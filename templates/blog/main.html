{% extends 'blog/base.html' %}

{% load i18n %}
{% load mptt_tags %}

{% block header %}
    <!-- Font Awesome -->
    <script src="https://use.fontawesome.com/04fd97554b.js"></script>
{% endblock %}

{% block content %}
    <script>
        $(function () {
            $('.glyphicon').on('click', function () {
                $(this)
                    .toggleClass('glyphicon-chevron-right')
                    .toggleClass('glyphicon-chevron-down');
            });
        });
    </script>
    <div class="container">
        <div class="main-tree list-group list-group-root">
            {% recursetree pages %}
                <div class="list-group-item">
                    <div class="panel-title" style="margin-left: {% widthratio node.level 1 20 %}px;">
                        {% if not node.is_leaf_node %}
                            <a data-toggle="collapse" href="#collapse-{{ node.url }}">
                                <i class="glyphicon glyphicon-chevron-right"></i>
                            </a>
                        {% else %}
                            <i class="glyphicon glyphicon-minus"></i>
                        {% endif %}
                        <a href="{% url 'page' page_url=node.url %}" class="panel-title-content">{{ node.title }}</a>
                    </div>
                </div>
                {% if not node.is_leaf_node %}
                    <div id="collapse-{{ node.url }}" class="list-gtoup collapse">
                        {{ children }}
                    </div>
                {% endif %}
            {% endrecursetree %}
        </div>
    </div>
{% endblock %}