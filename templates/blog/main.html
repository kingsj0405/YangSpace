{% extends 'blog/base.html' %}

{% load i18n %}
{% load mptt_tags %}

{% block content %}
    <script>
        $(function () {
            $('.glyphicon').on('click', function () {
                $(this)
                    .toggleClass('glyphicon-chevron-right')
                    .toggleClass('glyphicon-chevron-down');
            });
        });
    </script>
    <div class="list-group list-group-root well">
        {% recursetree pages %}
            <div class="list-group-item">
                <div class="panel-title" style="margin-left: {% widthratio node.level 1 20 %}px;">
                    {% if not node.is_leaf_node %}
                        <a data-toggle="collapse" href="#collapse-{{ node.title }}">
                            <i class="glyphicon glyphicon-chevron-right"></i>
                        </a>
                    {% else %}
                        <i class="glyphicon glyphicon-chevron-right"
                           style="visibility: hidden;"></i>
                    {% endif %}
                    <a href="{% url 'page' page_title=node.title %}">{{ node.title }}</a>
                </div>
            </div>
            {% if not node.is_leaf_node %}
                <div id="collapse-{{ node.title }}" class="list-gtoup collapse">
                    {{ children }}
                </div>
            {% endif %}
        {% endrecursetree %}
    </div>
{% endblock %}